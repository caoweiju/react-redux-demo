'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _queryString = require('query-string');

var _queryString2 = _interopRequireDefault(_queryString);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Build a URL with the given placeholders
 * 
 * @param {string} url
 * @param {string} placeholders
 */
var applyUrlWithPlaceholders = function applyUrlWithPlaceholders(url, placeholders) {
    var query = {};

    // Replace placeholders in the URL with the given values
    var completeUrl = Object.keys(placeholders).reduce(function (acc, key) {
        var token = ':' + key;

        // The URL contains a URL placeholder for the given key
        if (acc.indexOf(token) !== -1) {
            return acc.replace(token, placeholders[key]);
        }

        // Else, we place the key value into the query string
        if (typeof placeholders[key] != 'undefined') {
            query[key] = placeholders[key];
        }

        return acc;
    }, url);

    if (Object.keys(query).length > 0) {
        return completeUrl + '?' + _queryString2.default.stringify(query);
    }

    return completeUrl;
};

exports.default = applyUrlWithPlaceholders;